{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "8817cfa3-c75b-453b-b7d6-e17469e1f1ad",
   "metadata": {},
   "source": [
    "### 학습 목표\n",
    "- Selenium 라이브러리를 통해서 네이버 지도 맛집 데이터를 수집해보자!"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "b89d9302-e623-429b-9a43-082a77141c37",
   "metadata": {},
   "outputs": [],
   "source": [
    "from selenium import webdriver as wb\n",
    "from selenium.webdriver.common.keys import Keys\n",
    "from selenium.webdriver.common.by import By\n",
    "import time\n",
    "from tqdm import tqdm\n",
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "id": "5330a11e-7db2-49e0-9d9f-086c5d47f827",
   "metadata": {},
   "outputs": [],
   "source": [
    "# 컴퓨터용 브라우저 실행\n",
    "driver = wb.Chrome()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "id": "fb5006ac-7513-488c-b9ab-a6fd950cfe9b",
   "metadata": {},
   "outputs": [],
   "source": [
    "# url 요청하기\n",
    "url = 'https://map.naver.com/p?c=15.00,0,0,0,dh'\n",
    "driver.get(url)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "id": "eb8773e1-6d12-42cc-8c67-84b4a8100830",
   "metadata": {},
   "outputs": [],
   "source": [
    "# 검색창 찾아서 '순천 맛집' 입력하기\n",
    "search = driver.find_element(By.CSS_SELECTOR, 'div.input_box>input')\n",
    "search.clear()\n",
    "search.send_keys('순천 맛집\\n')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 102,
   "id": "ba5999d5-0330-4818-adf0-b12854b75951",
   "metadata": {},
   "outputs": [],
   "source": [
    "store_name = driver.find_elements(By.CLASS_NAME, 'TYaxT')"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "47723aad-aa2d-4c5d-adf8-94fb86dffc6b",
   "metadata": {},
   "source": [
    "### iframe 태그\n",
    "- 하나의 html 문서에서 다른 html 문서를 구성하고자 할 때 사용하는 태그\n",
    "\n",
    "- 지금까지 햇던 크롤링 -> 일반적인 접근\n",
    "\n",
    "- 일반적인 접근: 웹 페이지의 전체 html을 불러와서 접근\n",
    "\n",
    "- iframe에 있는 요소를 접근하려면 일반적인 접근으로는 불가능\n",
    "\n",
    "- 크롤링이 잘 안되는 경우\n",
    "\n",
    "  1. 선택자 지정 관련 오타\n",
    "  2. iframe 태그로 묶여있을 때\n",
    "  3. 사이트 자체에서 막아놨을 때"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 168,
   "id": "3c51bd2f-ff35-460f-aafc-112ecf255346",
   "metadata": {},
   "outputs": [],
   "source": [
    "# iframe 창 전환하는 함수\n",
    "driver.switch_to.frame('searchIframe') # id값만 적어주기"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 170,
   "id": "26c99837-598f-46e6-832a-1ba0a2e7ebcb",
   "metadata": {},
   "outputs": [],
   "source": [
    "# 가게 상호명 수집하기\n",
    "store_name = driver.find_elements(By.CLASS_NAME, 'TYaxT')\n",
    "\n",
    "# 창 전환 이후 수집 가능!"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 176,
   "id": "57898224-1f5b-4885-88e0-fb059df50dde",
   "metadata": {},
   "outputs": [],
   "source": [
    "# 첫번째 가게 클릭\n",
    "store_name[2].click()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 144,
   "id": "9d2fc6bd-7dab-4049-b556-fca8ec2b9d59",
   "metadata": {
    "collapsed": true,
    "jupyter": {
     "outputs_hidden": true
    }
   },
   "outputs": [
    {
     "ename": "NoSuchElementException",
     "evalue": "Message: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".LDgIH\"}\n  (Session info: chrome=133.0.6943.127); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nStacktrace:\n\tGetHandleVerifier [0x00007FF6F0EAC6A5+28789]\n\t(No symbol) [0x00007FF6F0E15B20]\n\t(No symbol) [0x00007FF6F0CA8F9A]\n\t(No symbol) [0x00007FF6F0CFF346]\n\t(No symbol) [0x00007FF6F0CFF57C]\n\t(No symbol) [0x00007FF6F0D52B17]\n\t(No symbol) [0x00007FF6F0D2736F]\n\t(No symbol) [0x00007FF6F0D4F7E3]\n\t(No symbol) [0x00007FF6F0D27103]\n\t(No symbol) [0x00007FF6F0CEFFC0]\n\t(No symbol) [0x00007FF6F0CF1273]\n\tGetHandleVerifier [0x00007FF6F11F1AED+3458237]\n\tGetHandleVerifier [0x00007FF6F120829C+3550316]\n\tGetHandleVerifier [0x00007FF6F11FDB9D+3507565]\n\tGetHandleVerifier [0x00007FF6F0F72C6A+841274]\n\t(No symbol) [0x00007FF6F0E209EF]\n\t(No symbol) [0x00007FF6F0E1CB34]\n\t(No symbol) [0x00007FF6F0E1CCD6]\n\t(No symbol) [0x00007FF6F0E0C119]\n\tBaseThreadInitThunk [0x00007FFDA6EE259D+29]\n\tRtlUserThreadStart [0x00007FFDA822AF38+40]\n",
     "output_type": "error",
     "traceback": [
      "\u001b[1;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[1;31mNoSuchElementException\u001b[0m                    Traceback (most recent call last)",
      "Cell \u001b[1;32mIn[144], line 2\u001b[0m\n\u001b[0;32m      1\u001b[0m \u001b[38;5;66;03m# 주소 수집하기\u001b[39;00m\n\u001b[1;32m----> 2\u001b[0m driver\u001b[38;5;241m.\u001b[39mfind_element(By\u001b[38;5;241m.\u001b[39mCLASS_NAME, \u001b[38;5;124m'\u001b[39m\u001b[38;5;124mLDgIH\u001b[39m\u001b[38;5;124m'\u001b[39m)\n",
      "File \u001b[1;32m~\\anaconda3\\Lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py:898\u001b[0m, in \u001b[0;36mWebDriver.find_element\u001b[1;34m(self, by, value)\u001b[0m\n\u001b[0;32m    895\u001b[0m         \u001b[38;5;28;01mraise\u001b[39;00m NoSuchElementException(\u001b[38;5;124mf\u001b[39m\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mCannot locate relative element with: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00mby\u001b[38;5;241m.\u001b[39mroot\u001b[38;5;132;01m}\u001b[39;00m\u001b[38;5;124m\"\u001b[39m)\n\u001b[0;32m    896\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m elements[\u001b[38;5;241m0\u001b[39m]\n\u001b[1;32m--> 898\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mexecute(Command\u001b[38;5;241m.\u001b[39mFIND_ELEMENT, {\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124musing\u001b[39m\u001b[38;5;124m\"\u001b[39m: by, \u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m: value})[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m]\n",
      "File \u001b[1;32m~\\anaconda3\\Lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py:429\u001b[0m, in \u001b[0;36mWebDriver.execute\u001b[1;34m(self, driver_command, params)\u001b[0m\n\u001b[0;32m    427\u001b[0m response \u001b[38;5;241m=\u001b[39m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mcommand_executor\u001b[38;5;241m.\u001b[39mexecute(driver_command, params)\n\u001b[0;32m    428\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m response:\n\u001b[1;32m--> 429\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39merror_handler\u001b[38;5;241m.\u001b[39mcheck_response(response)\n\u001b[0;32m    430\u001b[0m     response[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m] \u001b[38;5;241m=\u001b[39m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_unwrap_value(response\u001b[38;5;241m.\u001b[39mget(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m))\n\u001b[0;32m    431\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m response\n",
      "File \u001b[1;32m~\\anaconda3\\Lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py:232\u001b[0m, in \u001b[0;36mErrorHandler.check_response\u001b[1;34m(self, response)\u001b[0m\n\u001b[0;32m    230\u001b[0m         alert_text \u001b[38;5;241m=\u001b[39m value[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124malert\u001b[39m\u001b[38;5;124m\"\u001b[39m]\u001b[38;5;241m.\u001b[39mget(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mtext\u001b[39m\u001b[38;5;124m\"\u001b[39m)\n\u001b[0;32m    231\u001b[0m     \u001b[38;5;28;01mraise\u001b[39;00m exception_class(message, screen, stacktrace, alert_text)  \u001b[38;5;66;03m# type: ignore[call-arg]  # mypy is not smart enough here\u001b[39;00m\n\u001b[1;32m--> 232\u001b[0m \u001b[38;5;28;01mraise\u001b[39;00m exception_class(message, screen, stacktrace)\n",
      "\u001b[1;31mNoSuchElementException\u001b[0m: Message: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".LDgIH\"}\n  (Session info: chrome=133.0.6943.127); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nStacktrace:\n\tGetHandleVerifier [0x00007FF6F0EAC6A5+28789]\n\t(No symbol) [0x00007FF6F0E15B20]\n\t(No symbol) [0x00007FF6F0CA8F9A]\n\t(No symbol) [0x00007FF6F0CFF346]\n\t(No symbol) [0x00007FF6F0CFF57C]\n\t(No symbol) [0x00007FF6F0D52B17]\n\t(No symbol) [0x00007FF6F0D2736F]\n\t(No symbol) [0x00007FF6F0D4F7E3]\n\t(No symbol) [0x00007FF6F0D27103]\n\t(No symbol) [0x00007FF6F0CEFFC0]\n\t(No symbol) [0x00007FF6F0CF1273]\n\tGetHandleVerifier [0x00007FF6F11F1AED+3458237]\n\tGetHandleVerifier [0x00007FF6F120829C+3550316]\n\tGetHandleVerifier [0x00007FF6F11FDB9D+3507565]\n\tGetHandleVerifier [0x00007FF6F0F72C6A+841274]\n\t(No symbol) [0x00007FF6F0E209EF]\n\t(No symbol) [0x00007FF6F0E1CB34]\n\t(No symbol) [0x00007FF6F0E1CCD6]\n\t(No symbol) [0x00007FF6F0E0C119]\n\tBaseThreadInitThunk [0x00007FFDA6EE259D+29]\n\tRtlUserThreadStart [0x00007FFDA822AF38+40]\n"
     ]
    }
   ],
   "source": [
    "# 주소 수집하기\n",
    "driver.find_element(By.CLASS_NAME, 'LDgIH')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 218,
   "id": "5a414c3b-51c2-4106-9169-bae87fd1bcd1",
   "metadata": {},
   "outputs": [],
   "source": [
    "# 기본 창으로 전환\n",
    "driver.switch_to.default_content()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 180,
   "id": "3b63e7c5-dacf-48f6-a1a9-28943ee6dd26",
   "metadata": {},
   "outputs": [],
   "source": [
    "# iframe 창 전환하는 함수\n",
    "driver.switch_to.frame('entryIframe')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 184,
   "id": "b8433e92-2beb-4d92-a1d9-5f6ab54344f1",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'전남 순천시 순천만길 496 밥꽃이야기 들마루'"
      ]
     },
     "execution_count": 184,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# 주소 수집하기\n",
    "driver.find_element(By.CLASS_NAME, 'LDgIH')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 204,
   "id": "d1a6c4c4-df3a-48cd-9b04-c75ebea67a7a",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "거목순대국밥\n",
      "전남 순천시 장평로 50\n"
     ]
    }
   ],
   "source": [
    "# 두번째 가게 클릭\n",
    "driver.switch_to.default_content()\n",
    "driver.switch_to.frame('searchIframe')\n",
    "print(store_name[4].text)\n",
    "store_name[4].click()\n",
    "driver.switch_to.default_content()\n",
    "driver.switch_to.frame('entryIframe')\n",
    "print(driver.find_element(By.CLASS_NAME, 'LDgIH').text)\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 258,
   "id": "370db864-a009-49e2-a352-69a7b6a3672d",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "스크롤 하강 완료\n"
     ]
    }
   ],
   "source": [
    "# driver.switch_to.default_content()\n",
    "driver.switch_to.frame('searchIframe')\n",
    "body = driver.find_element(By.ID,'_pcmap_list_scroll_container')\n",
    "while True:\n",
    "    old = driver.page_source\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    new = driver.page_source\n",
    "    if len(old) == len(new):\n",
    "        print('스크롤 하강 완료')\n",
    "        break\n",
    "    else:\n",
    "        pass"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 260,
   "id": "aa5f096a-0175-4b80-b1d4-dd3f7e314ac7",
   "metadata": {},
   "outputs": [],
   "source": [
    "store_name = driver.find_elements(By.CLASS_NAME, 'TYaxT')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 272,
   "id": "9967cc54-efaa-4c14-931c-06fe249cda44",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|██████████████████████████████████████████████████████████████████████████████████| 76/76 [03:20<00:00,  2.64s/it]\n"
     ]
    }
   ],
   "source": [
    "store_add_list = []\n",
    "for i in tqdm(range(len(store_name))):\n",
    "    store_name[i].click()\n",
    "    time.sleep(2.5)\n",
    "    driver.switch_to.default_content()\n",
    "    driver.switch_to.frame('entryIframe')\n",
    "    store_add_list.append(driver.find_element(By.CLASS_NAME, 'LDgIH').text)\n",
    "    driver.switch_to.default_content()\n",
    "    driver.switch_to.frame('searchIframe')\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 270,
   "id": "c163a0cd-f21b-4551-9754-f2382aff43a2",
   "metadata": {},
   "outputs": [],
   "source": [
    "driver.switch_to.default_content()\n",
    "driver.switch_to.frame('searchIframe')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 274,
   "id": "db181dc7-daf4-4126-ad46-76dbff186cbb",
   "metadata": {
    "collapsed": true,
    "jupyter": {
     "outputs_hidden": true
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['전남 순천시 왕지4길 10-16 1층',\n",
       " '전남 순천시 해룡면 남가1길 2 잉글우드',\n",
       " '전남 순천시 순천만길 496 밥꽃이야기 들마루',\n",
       " '전남 순천시 장천2길 30-29 대원식당',\n",
       " '전남 순천시 장평로 50',\n",
       " '전남 순천시 왕지2길 13-12 1층',\n",
       " '전남 순천시 해룡면 해룡로 579 참조은시골집',\n",
       " '전남 순천시 순천만길 309 1층 도원경',\n",
       " '전남 순천시 순천만길 496-1',\n",
       " '전남 순천시 중앙2길 7',\n",
       " '전남 순천시 팔마로 269 나동',\n",
       " '전남 순천시 해룡면 매안로 72 1층',\n",
       " '전남 순천시 왕지4길 14-9 1층 다락카레 호수공원점',\n",
       " '전남 순천시 상사호길 120 The미주농원120',\n",
       " '전남 순천시 하풍동길 21 오션팰리스',\n",
       " '전남 순천시 동너리길 8 남도밥상',\n",
       " '전남 순천시 연향번영1길 53 1층 브런치카페 소화',\n",
       " '전남 순천시 월등면 송치안길 88 송치마을',\n",
       " '전남 순천시 팔마1길 4 팔마1길4',\n",
       " '전남 순천시 역전길 61 브루웍스',\n",
       " '전남 순천시 조례2길 40 별미정',\n",
       " '전남 순천시 장평로 65 1층',\n",
       " '전남 순천시 해룡면 매안로 109 1층 102호',\n",
       " '전남 순천시 팔마4길 37 1층',\n",
       " '전남 순천시 봉화로 46 조훈모과자점',\n",
       " '전남 순천시 해룡면 매안로 83 1층',\n",
       " '전남 순천시 해룡면 조례못등3길 4-11 1층',\n",
       " '전남 순천시 중앙3길 5 1층',\n",
       " '전남 순천시 원가곡3길 24-20 1층',\n",
       " '전남 순천시 남신월1길 8-6 1층',\n",
       " '전남 순천시 원가곡3길 24-20 3층',\n",
       " '전남 순천시 봉화2길 52 1층',\n",
       " '전남 순천시 상사호길 73',\n",
       " '전남 순천시 왕지4길 18 2층',\n",
       " '전남 순천시 성남뒷길 3 풍미통닭',\n",
       " '전남 순천시 구암길 26 1층 신화정',\n",
       " '전남 순천시 낙안면 삼일로 63 1층 최대감벌교꼬막',\n",
       " '전남 순천시 남신월3길 5 서식',\n",
       " '전남 순천시 역전2길 46',\n",
       " '전남 순천시 구암1길 11-3 1층',\n",
       " '전남 순천시 해룡면 향매1길 16-17 1층',\n",
       " '전남 순천시 해룡면 중흥1길 8 오리명가',\n",
       " '전남 순천시 중앙로 90-1 화월당',\n",
       " '전남 순천시 해룡면 신대1길 4-21',\n",
       " '전남 순천시 연향번영1길 23 순천갈대장어',\n",
       " '전남 순천시 장명2길 4 남흥회관',\n",
       " '전남 순천시 장명4길 8 금빈회관',\n",
       " '전남 순천시 순광로 150',\n",
       " '전남 순천시 남신월4길 13-26',\n",
       " '전남 순천시 해룡면 향매1길 21-9',\n",
       " '전남 순천시 금곡길 106 1층',\n",
       " '전남 순천시 왕지4길 13-15 2층 하고스',\n",
       " '전남 순천시 해룡면 향매1길 6 (신대리) 1층',\n",
       " '전남 순천시 왕지4길 9-5 1층',\n",
       " '전남 순천시 팔마2길 87 1층 순천고기집육안',\n",
       " '전남 순천시 장명5길 11 1층',\n",
       " '전남 순천시 해룡면 정채봉길 30 1층 순천 산들담은',\n",
       " '전남 순천시 월등면 농곡길 1-4',\n",
       " '전남 순천시 남신월4길 7 101호',\n",
       " '전남 순천시 금곡길 11',\n",
       " '전남 순천시 오천6길 27-9 1층 나루 (족발이땡기는날앞)',\n",
       " '전남 순천시 장자보2길 108 홍성준양푼갈비',\n",
       " '전남 순천시 황전면 괴목길 21',\n",
       " '전남 순천시 금곡길 8 양지쌈밥',\n",
       " '전남 순천시 북문길 40',\n",
       " '전남 순천시 북문길 40',\n",
       " '전남 순천시 별량면 녹색로 47',\n",
       " '전남 순천시 순천만길 492',\n",
       " '전남 순천시 북문길 40 제일식당 본점',\n",
       " '전남 순천시 장평로 28-1',\n",
       " '전남 순천시 왕지1길 11 1층 (왕지동)',\n",
       " '전남 순천시 왕지4길 11',\n",
       " '전남 순천시 순천만길 520 1층',\n",
       " '전남 순천시 남산로 145',\n",
       " '전남 순천시 해룡면 매안4길 3-11 101호 코우텐동',\n",
       " '전남 순천시 왕지로 39 1층']"
      ]
     },
     "execution_count": 274,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "store_add_list"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 276,
   "id": "2e3eb5bb-d9a9-4841-8b0c-0e8f909564bf",
   "metadata": {
    "collapsed": true,
    "jupyter": {
     "outputs_hidden": true
    }
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['유유샤브 순천점',\n",
       " '잉글우드',\n",
       " '밥꽃이야기 들마루',\n",
       " '대원식당',\n",
       " '거목순대국밥',\n",
       " '덕수파스타 순천 직영점',\n",
       " '참조은시골집 한정식',\n",
       " '도원경',\n",
       " '순천만전라도밥상',\n",
       " '순천 한정식 명궁관',\n",
       " '조훈모과자점 팔마점',\n",
       " '순천게장 낭만별식 신대국가정원점',\n",
       " '다락카레 호수공원점',\n",
       " 'The미주농원120 순천본점',\n",
       " '남녘들밥상',\n",
       " '순천 꼬막정식 남도밥상',\n",
       " '브런치카페 소화',\n",
       " '송치마을',\n",
       " '나눌터',\n",
       " '브루웍스',\n",
       " '별미정 순천조례점',\n",
       " '순천 건봉국밥',\n",
       " '하남돼지집 순천신대점',\n",
       " '최군네 숯불구이',\n",
       " '조훈모과자점 죽도봉점',\n",
       " '희야 소머리국밥 설렁탕 도가니탕',\n",
       " '힐링포차',\n",
       " '아삐에노',\n",
       " '꽃잎 한정식',\n",
       " '모토이시 순천점',\n",
       " '에스가든청담 브런치가든 순천점',\n",
       " '꾸석지돌판한우 순천조례점',\n",
       " '벽오동',\n",
       " '어나더키친 순천점',\n",
       " '풍미통닭',\n",
       " '신화정',\n",
       " '최대감벌교꼬막',\n",
       " '서식',\n",
       " '밀림슈퍼',\n",
       " '카페집',\n",
       " '육지향 정육식당 신대점',\n",
       " '오리명가',\n",
       " '화월당',\n",
       " '구이대장쪽갈비 신대점',\n",
       " '순천갈대장어 연향점',\n",
       " '남흥회관 순천시청본점',\n",
       " '금빈회관',\n",
       " '봉화식당',\n",
       " '향토정',\n",
       " '한우식껍',\n",
       " '주복',\n",
       " '하고스',\n",
       " '힉',\n",
       " '히바치텐',\n",
       " '육안 순천고기집',\n",
       " '고데레',\n",
       " '순천 산들담은 순천본점',\n",
       " '수련산방',\n",
       " '여수갓육고 순천본점',\n",
       " '태경원조동경낙지',\n",
       " '나루',\n",
       " '홍성준양푼갈비',\n",
       " '옛날할머니순대국밥',\n",
       " '양지쌈밥',\n",
       " '괴목국밥',\n",
       " '향촌식당',\n",
       " '지리산순한한우명품관 본점',\n",
       " '순천만정문식당',\n",
       " '제일식당',\n",
       " '광춘원',\n",
       " '참이맛감자탕&순대국 순천법원점',\n",
       " '슬로우프로젝트 즐거운식탁',\n",
       " '순천만 일번가',\n",
       " '육사 순희집밥',\n",
       " '코우텐동',\n",
       " '바바베이커스']"
      ]
     },
     "execution_count": 276,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "store_name_list = [i.text for i in store_name]\n",
    "store_name_list"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 286,
   "id": "c83da3ca-c2f1-4ed5-8f81-676b70700d02",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>가게이름</th>\n",
       "      <th>가게주소</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>유유샤브 순천점</td>\n",
       "      <td>전남 순천시 왕지4길 10-16 1층</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>잉글우드</td>\n",
       "      <td>전남 순천시 해룡면 남가1길 2 잉글우드</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>밥꽃이야기 들마루</td>\n",
       "      <td>전남 순천시 순천만길 496 밥꽃이야기 들마루</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>대원식당</td>\n",
       "      <td>전남 순천시 장천2길 30-29 대원식당</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>거목순대국밥</td>\n",
       "      <td>전남 순천시 장평로 50</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>71</th>\n",
       "      <td>슬로우프로젝트 즐거운식탁</td>\n",
       "      <td>전남 순천시 왕지4길 11</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>72</th>\n",
       "      <td>순천만 일번가</td>\n",
       "      <td>전남 순천시 순천만길 520 1층</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>73</th>\n",
       "      <td>육사 순희집밥</td>\n",
       "      <td>전남 순천시 남산로 145</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>74</th>\n",
       "      <td>코우텐동</td>\n",
       "      <td>전남 순천시 해룡면 매안4길 3-11 101호 코우텐동</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75</th>\n",
       "      <td>바바베이커스</td>\n",
       "      <td>전남 순천시 왕지로 39 1층</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>76 rows × 2 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "             가게이름                            가게주소\n",
       "0        유유샤브 순천점            전남 순천시 왕지4길 10-16 1층\n",
       "1            잉글우드          전남 순천시 해룡면 남가1길 2 잉글우드\n",
       "2       밥꽃이야기 들마루       전남 순천시 순천만길 496 밥꽃이야기 들마루\n",
       "3            대원식당          전남 순천시 장천2길 30-29 대원식당\n",
       "4          거목순대국밥                   전남 순천시 장평로 50\n",
       "..            ...                             ...\n",
       "71  슬로우프로젝트 즐거운식탁                  전남 순천시 왕지4길 11\n",
       "72        순천만 일번가              전남 순천시 순천만길 520 1층\n",
       "73        육사 순희집밥                  전남 순천시 남산로 145\n",
       "74           코우텐동  전남 순천시 해룡면 매안4길 3-11 101호 코우텐동\n",
       "75         바바베이커스                전남 순천시 왕지로 39 1층\n",
       "\n",
       "[76 rows x 2 columns]"
      ]
     },
     "execution_count": 286,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data = pd.DataFrame(data = {'가게이름': store_name_list, '가게주소': store_add_list})\n",
    "data"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 408,
   "id": "1ba31a85-acea-446c-bf08-59f2f1f3f93e",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 242.19it/s]\n",
      " 21%|█████████████████▎                                                                | 16/76 [00:54<03:23,  3.39s/it]\n"
     ]
    },
    {
     "ename": "NoSuchElementException",
     "evalue": "Message: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".LDgIH\"}\n  (Session info: chrome=133.0.6943.127); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nStacktrace:\n\tGetHandleVerifier [0x00007FF6F0EAC6A5+28789]\n\t(No symbol) [0x00007FF6F0E15B20]\n\t(No symbol) [0x00007FF6F0CA8F9A]\n\t(No symbol) [0x00007FF6F0CFF346]\n\t(No symbol) [0x00007FF6F0CFF57C]\n\t(No symbol) [0x00007FF6F0D52B17]\n\t(No symbol) [0x00007FF6F0D2736F]\n\t(No symbol) [0x00007FF6F0D4F7E3]\n\t(No symbol) [0x00007FF6F0D27103]\n\t(No symbol) [0x00007FF6F0CEFFC0]\n\t(No symbol) [0x00007FF6F0CF1273]\n\tGetHandleVerifier [0x00007FF6F11F1AED+3458237]\n\tGetHandleVerifier [0x00007FF6F120829C+3550316]\n\tGetHandleVerifier [0x00007FF6F11FDB9D+3507565]\n\tGetHandleVerifier [0x00007FF6F0F72C6A+841274]\n\t(No symbol) [0x00007FF6F0E209EF]\n\t(No symbol) [0x00007FF6F0E1CB34]\n\t(No symbol) [0x00007FF6F0E1CCD6]\n\t(No symbol) [0x00007FF6F0E0C119]\n\tBaseThreadInitThunk [0x00007FFDA6EE259D+29]\n\tRtlUserThreadStart [0x00007FFDA822AF38+40]\n",
     "output_type": "error",
     "traceback": [
      "\u001b[1;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[1;31mNoSuchElementException\u001b[0m                    Traceback (most recent call last)",
      "Cell \u001b[1;32mIn[408], line 39\u001b[0m\n\u001b[0;32m     37\u001b[0m driver\u001b[38;5;241m.\u001b[39mswitch_to\u001b[38;5;241m.\u001b[39mdefault_content()\n\u001b[0;32m     38\u001b[0m driver\u001b[38;5;241m.\u001b[39mswitch_to\u001b[38;5;241m.\u001b[39mframe(\u001b[38;5;124m'\u001b[39m\u001b[38;5;124mentryIframe\u001b[39m\u001b[38;5;124m'\u001b[39m)\n\u001b[1;32m---> 39\u001b[0m store_add_list\u001b[38;5;241m.\u001b[39mappend(driver\u001b[38;5;241m.\u001b[39mfind_element(By\u001b[38;5;241m.\u001b[39mCLASS_NAME, \u001b[38;5;124m'\u001b[39m\u001b[38;5;124mLDgIH\u001b[39m\u001b[38;5;124m'\u001b[39m)\u001b[38;5;241m.\u001b[39mtext)\n\u001b[0;32m     40\u001b[0m driver\u001b[38;5;241m.\u001b[39mswitch_to\u001b[38;5;241m.\u001b[39mdefault_content()\n\u001b[0;32m     41\u001b[0m driver\u001b[38;5;241m.\u001b[39mswitch_to\u001b[38;5;241m.\u001b[39mframe(\u001b[38;5;124m'\u001b[39m\u001b[38;5;124msearchIframe\u001b[39m\u001b[38;5;124m'\u001b[39m)\n",
      "File \u001b[1;32m~\\anaconda3\\Lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py:898\u001b[0m, in \u001b[0;36mWebDriver.find_element\u001b[1;34m(self, by, value)\u001b[0m\n\u001b[0;32m    895\u001b[0m         \u001b[38;5;28;01mraise\u001b[39;00m NoSuchElementException(\u001b[38;5;124mf\u001b[39m\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mCannot locate relative element with: \u001b[39m\u001b[38;5;132;01m{\u001b[39;00mby\u001b[38;5;241m.\u001b[39mroot\u001b[38;5;132;01m}\u001b[39;00m\u001b[38;5;124m\"\u001b[39m)\n\u001b[0;32m    896\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m elements[\u001b[38;5;241m0\u001b[39m]\n\u001b[1;32m--> 898\u001b[0m \u001b[38;5;28;01mreturn\u001b[39;00m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mexecute(Command\u001b[38;5;241m.\u001b[39mFIND_ELEMENT, {\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124musing\u001b[39m\u001b[38;5;124m\"\u001b[39m: by, \u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m: value})[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m]\n",
      "File \u001b[1;32m~\\anaconda3\\Lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py:429\u001b[0m, in \u001b[0;36mWebDriver.execute\u001b[1;34m(self, driver_command, params)\u001b[0m\n\u001b[0;32m    427\u001b[0m response \u001b[38;5;241m=\u001b[39m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39mcommand_executor\u001b[38;5;241m.\u001b[39mexecute(driver_command, params)\n\u001b[0;32m    428\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m response:\n\u001b[1;32m--> 429\u001b[0m     \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39merror_handler\u001b[38;5;241m.\u001b[39mcheck_response(response)\n\u001b[0;32m    430\u001b[0m     response[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m] \u001b[38;5;241m=\u001b[39m \u001b[38;5;28mself\u001b[39m\u001b[38;5;241m.\u001b[39m_unwrap_value(response\u001b[38;5;241m.\u001b[39mget(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mvalue\u001b[39m\u001b[38;5;124m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m))\n\u001b[0;32m    431\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m response\n",
      "File \u001b[1;32m~\\anaconda3\\Lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py:232\u001b[0m, in \u001b[0;36mErrorHandler.check_response\u001b[1;34m(self, response)\u001b[0m\n\u001b[0;32m    230\u001b[0m         alert_text \u001b[38;5;241m=\u001b[39m value[\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124malert\u001b[39m\u001b[38;5;124m\"\u001b[39m]\u001b[38;5;241m.\u001b[39mget(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124mtext\u001b[39m\u001b[38;5;124m\"\u001b[39m)\n\u001b[0;32m    231\u001b[0m     \u001b[38;5;28;01mraise\u001b[39;00m exception_class(message, screen, stacktrace, alert_text)  \u001b[38;5;66;03m# type: ignore[call-arg]  # mypy is not smart enough here\u001b[39;00m\n\u001b[1;32m--> 232\u001b[0m \u001b[38;5;28;01mraise\u001b[39;00m exception_class(message, screen, stacktrace)\n",
      "\u001b[1;31mNoSuchElementException\u001b[0m: Message: no such element: Unable to locate element: {\"method\":\"css selector\",\"selector\":\".LDgIH\"}\n  (Session info: chrome=133.0.6943.127); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nStacktrace:\n\tGetHandleVerifier [0x00007FF6F0EAC6A5+28789]\n\t(No symbol) [0x00007FF6F0E15B20]\n\t(No symbol) [0x00007FF6F0CA8F9A]\n\t(No symbol) [0x00007FF6F0CFF346]\n\t(No symbol) [0x00007FF6F0CFF57C]\n\t(No symbol) [0x00007FF6F0D52B17]\n\t(No symbol) [0x00007FF6F0D2736F]\n\t(No symbol) [0x00007FF6F0D4F7E3]\n\t(No symbol) [0x00007FF6F0D27103]\n\t(No symbol) [0x00007FF6F0CEFFC0]\n\t(No symbol) [0x00007FF6F0CF1273]\n\tGetHandleVerifier [0x00007FF6F11F1AED+3458237]\n\tGetHandleVerifier [0x00007FF6F120829C+3550316]\n\tGetHandleVerifier [0x00007FF6F11FDB9D+3507565]\n\tGetHandleVerifier [0x00007FF6F0F72C6A+841274]\n\t(No symbol) [0x00007FF6F0E209EF]\n\t(No symbol) [0x00007FF6F0E1CB34]\n\t(No symbol) [0x00007FF6F0E1CCD6]\n\t(No symbol) [0x00007FF6F0E0C119]\n\tBaseThreadInitThunk [0x00007FFDA6EE259D+29]\n\tRtlUserThreadStart [0x00007FFDA822AF38+40]\n"
     ]
    }
   ],
   "source": [
    "# 전체 코드\n",
    "\n",
    "from selenium import webdriver as wb\n",
    "from selenium.webdriver.common.keys import Keys\n",
    "from selenium.webdriver.common.by import By\n",
    "import time\n",
    "from tqdm import tqdm\n",
    "import pandas as pd\n",
    "\n",
    "driver = wb.Chrome()\n",
    "url = 'https://map.naver.com/p?c=15.00,0,0,0,dh'\n",
    "driver.get(url)\n",
    "time.sleep(5) # 사이트 로딩 시간 부여\n",
    "\n",
    "search = driver.find_element(By.CSS_SELECTOR, 'div.input_box>input')\n",
    "search.send_keys('순천 맛집\\n')\n",
    "time.sleep(5) # 검색 후 리스트 로딩 시간 부여\n",
    "\n",
    "driver.switch_to.default_content()\n",
    "driver.switch_to.frame('searchIframe')\n",
    "body = driver.find_element(By.ID,'_pcmap_list_scroll_container')\n",
    "store_name = []\n",
    "while True:\n",
    "    old = driver.page_source\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    new = driver.page_source\n",
    "    if len(old) == len(new):\n",
    "        print('스크롤 하강 완료')\n",
    "        store_name.extend(driver.find_elements(By.CLASS_NAME, 'TYaxT'))\n",
    "        driver.find_element(By.CSS_SELECTOR, 'div.zRM9F>a:last-child').click()\n",
    "        time.sleep(2)\n",
    "        if len(new) == len(driver.page_source):\n",
    "            print('store_name 생성 완료')\n",
    "            break\n",
    "        else:\n",
    "            print('페이지 넘김')\n",
    "            pass\n",
    "    else:\n",
    "        pass\n",
    "\n",
    "store_name = driver.find_elements(By.CLASS_NAME, 'TYaxT')\n",
    "store_name_list = [i.text for i in tqdm(store_name)]\n",
    "print('store_name_list 생성 완료')\n",
    "\n",
    "store_add_list = []\n",
    "for i in tqdm(range(len(store_name))):\n",
    "    store_name[i].click()\n",
    "    time.sleep(3)\n",
    "    driver.switch_to.default_content()\n",
    "    driver.switch_to.frame('entryIframe')\n",
    "    store_add_list.append(driver.find_element(By.CLASS_NAME, 'LDgIH').text)\n",
    "    driver.switch_to.default_content()\n",
    "    driver.switch_to.frame('searchIframe')\n",
    "print('store_add_list 생성 완료')\n",
    "\n",
    "data = pd.DataFrame(data = {'가게이름': store_name_list, '가게주소': store_add_list})\n",
    "print(data)\n",
    "\n",
    "time.sleep(2)\n",
    "driver.switch_to.default_content()\n",
    "driver.quit()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "68f729ae-e980-4274-a3ff-9e30827a5391",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 237.01it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 76/76 [03:57<00:00,  3.13s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 248.24it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 76/76 [03:59<00:00,  3.15s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 70/70 [00:00<00:00, 180.13it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 70/70 [03:41<00:00,  3.17s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 70/70 [00:00<00:00, 263.50it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 70/70 [03:42<00:00,  3.18s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 20/20 [00:00<00:00, 235.44it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 20/20 [01:02<00:00,  3.12s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 20/20 [00:00<00:00, 271.30it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 20/20 [01:02<00:00,  3.11s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "store_name_list 생성 완료\n",
      "store_add_list 생성 완료\n",
      "           가게이름                          가게주소\n",
      "0       신대 한우곱창  전남 순천시 해룡면 신대2길 6-41 1층 115호\n",
      "1    순천갈대장어 연향점       전남 순천시 연향번영1길 23 순천갈대장어\n",
      "2     밥꽃이야기 들마루     전남 순천시 순천만길 496 밥꽃이야기 들마루\n",
      "3          대원식당        전남 순천시 장천2길 30-29 대원식당\n",
      "4        거목순대국밥                 전남 순천시 장평로 50\n",
      "..          ...                           ...\n",
      "327        순천중식                전남 순천시 하대석길 77\n",
      "328       낭만먹거리          전남 순천시 상인제1길 2 낭만먹거리\n",
      "329      정동 순천점        전남 순천시 왕지1길 19 1층 101호\n",
      "330        초원식당            전남 순천시 승주읍 승암교길 14\n",
      "331          일품               전남 순천시 순천만길 668\n",
      "\n",
      "[332 rows x 2 columns]\n"
     ]
    }
   ],
   "source": [
    "# 전체 코드\n",
    "\n",
    "from selenium import webdriver as wb\n",
    "from selenium.webdriver.common.keys import Keys\n",
    "from selenium.webdriver.common.by import By\n",
    "import time\n",
    "from tqdm import tqdm\n",
    "import pandas as pd\n",
    "\n",
    "driver = wb.Chrome()\n",
    "url = 'https://map.naver.com/p?c=15.00,0,0,0,dh'\n",
    "driver.get(url)\n",
    "time.sleep(5) # 사이트 로딩 시간 부여\n",
    "\n",
    "search = driver.find_element(By.CSS_SELECTOR, 'div.input_box>input')\n",
    "search.send_keys('순천 맛집\\n')\n",
    "time.sleep(5) # 검색 후 리스트 로딩 시간 부여\n",
    "\n",
    "driver.switch_to.frame('searchIframe')\n",
    "body = driver.find_element(By.ID,'_pcmap_list_scroll_container')\n",
    "store_name = []\n",
    "store_name_list = []\n",
    "store_add_list = []\n",
    "while True:\n",
    "    old = driver.page_source\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    new = driver.page_source\n",
    "    if old == new:\n",
    "        print('스크롤 하강 완료')\n",
    "        store_name_temp = driver.find_elements(By.CLASS_NAME, 'TYaxT')\n",
    "        store_name.extend(store_name_temp)\n",
    "        store_name_list.extend([i.text for i in tqdm(store_name_temp)])\n",
    "        for i in tqdm(range(len(store_name_temp))):\n",
    "            store_name_temp[i].click()\n",
    "            time.sleep(3)\n",
    "            driver.switch_to.default_content()\n",
    "            driver.switch_to.frame('entryIframe')\n",
    "            store_add_list.append(driver.find_element(By.CLASS_NAME, 'LDgIH').text)\n",
    "            driver.switch_to.default_content()\n",
    "            driver.switch_to.frame('searchIframe')\n",
    "        new = driver.page_source\n",
    "        driver.find_element(By.CSS_SELECTOR, 'div.zRM9F>a:last-child').click()\n",
    "        time.sleep(1)\n",
    "        if new == driver.page_source:\n",
    "            print('store_name_list 생성 완료')\n",
    "            break\n",
    "        else:\n",
    "            print('페이지 넘김')\n",
    "            time.sleep(3)\n",
    "            pass\n",
    "    else:\n",
    "        pass\n",
    "\n",
    "print('store_add_list 생성 완료')\n",
    "\n",
    "data = pd.DataFrame(data = {'가게이름': store_name_list, '가게주소': store_add_list})\n",
    "print(data)\n",
    "\n",
    "time.sleep(2)\n",
    "driver.switch_to.default_content()\n",
    "driver.quit()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "id": "28d7e9cf-4f4d-4873-97ad-a736d6dad113",
   "metadata": {},
   "outputs": [],
   "source": [
    "driver.quit()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 304,
   "id": "17459967-4b80-43cd-825e-5f49d335b062",
   "metadata": {},
   "outputs": [],
   "source": [
    "data.to_csv('순천맛집.csv', encoding = 'utf-8', index = False)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 312,
   "id": "292c9625-ff51-4c0d-a4ec-7a1ac2e372c7",
   "metadata": {},
   "outputs": [],
   "source": [
    "a = ['a', 'b', 'c']\n",
    "b = ['d', 'e', 'f']\n",
    "a.extend(b)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 368,
   "id": "4f96f41d-6bdc-426a-a965-760b9fa486d9",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 243.45it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 76/76 [03:58<00:00,  3.14s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 215.68it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 76/76 [03:59<00:00,  3.14s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 70/70 [00:00<00:00, 256.20it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 70/70 [03:41<00:00,  3.16s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 70/70 [00:00<00:00, 250.35it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 70/70 [03:43<00:00,  3.20s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 20/20 [00:00<00:00, 128.07it/s]\n",
      "100%|██████████████████████████████████████████████████████████████████████████████████| 20/20 [01:04<00:00,  3.20s/it]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "store_name_list 생성 완료\n",
      "store_add_list 생성 완료\n"
     ]
    }
   ],
   "source": [
    "driver.switch_to.default_content()\n",
    "driver.switch_to.frame('searchIframe')\n",
    "body = driver.find_element(By.ID,'_pcmap_list_scroll_container')\n",
    "store_name = []\n",
    "store_name_list = []\n",
    "store_add_list = []\n",
    "while True:\n",
    "    old = driver.page_source\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    new = driver.page_source\n",
    "    if len(old) == len(new):\n",
    "        print('스크롤 하강 완료')\n",
    "        store_name_temp = driver.find_elements(By.CLASS_NAME, 'TYaxT')\n",
    "        store_name.extend(store_name_temp)\n",
    "        store_name_list.extend([i.text for i in tqdm(store_name_temp)])\n",
    "        for i in tqdm(range(len(store_name_temp))):\n",
    "            store_name_temp[i].click()\n",
    "            time.sleep(3)\n",
    "            driver.switch_to.default_content()\n",
    "            driver.switch_to.frame('entryIframe')\n",
    "            store_add_list.append(driver.find_element(By.CLASS_NAME, 'LDgIH').text)\n",
    "            driver.switch_to.default_content()\n",
    "            driver.switch_to.frame('searchIframe')\n",
    "        new = driver.page_source\n",
    "        driver.find_element(By.CSS_SELECTOR, 'div.zRM9F>a:last-child').click()\n",
    "        time.sleep(1)\n",
    "        if new == driver.page_source:\n",
    "            print('store_name_list 생성 완료')\n",
    "            break\n",
    "        else:\n",
    "            print('페이지 넘김')\n",
    "            time.sleep(5)\n",
    "            pass\n",
    "    else:\n",
    "        pass\n",
    "\n",
    "print('store_add_list 생성 완료')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 404,
   "id": "edd7820f-3c8d-4d40-a5de-6faeab4b7d43",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "가게이름    0\n",
       "가게주소    0\n",
       "dtype: int64"
      ]
     },
     "execution_count": 404,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data = pd.DataFrame(data = {'가게이름': store_name_list, '가게주소': store_add_list})\n",
    "# len(store_add_list)\n",
    "data.isnull().sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "id": "3c4b3baa-3b39-4cf9-8a67-463e088ba73f",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 233.35it/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 76/76 [00:00<00:00, 230.73it/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 70/70 [00:00<00:00, 212.03it/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 70/70 [00:00<00:00, 227.60it/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "페이지 넘김\n",
      "스크롤 하강 완료\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "100%|█████████████████████████████████████████████████████████████████████████████████| 20/20 [00:00<00:00, 248.09it/s]\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "store_name_list 생성 완료\n"
     ]
    }
   ],
   "source": [
    "driver.switch_to.default_content()\n",
    "driver.switch_to.frame('searchIframe')\n",
    "body = driver.find_element(By.ID,'_pcmap_list_scroll_container')\n",
    "store_name = []\n",
    "store_name_list = []\n",
    "while True:\n",
    "    old = driver.page_source\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    body.send_keys(Keys.END)\n",
    "    time.sleep(2)\n",
    "    new = driver.page_source\n",
    "    if len(old) == len(new):\n",
    "        print('스크롤 하강 완료')\n",
    "        store_name_temp = driver.find_elements(By.CLASS_NAME, 'TYaxT')\n",
    "        store_name.extend(store_name_temp)\n",
    "        store_name_list.extend([i.text for i in tqdm(store_name_temp)])\n",
    "        new = driver.page_source\n",
    "        driver.find_element(By.CSS_SELECTOR, 'div.zRM9F>a:last-child').click()\n",
    "        time.sleep(1)\n",
    "        if new == driver.page_source:\n",
    "            print('store_name_list 생성 완료')\n",
    "            break\n",
    "        else:\n",
    "            print('페이지 넘김')\n",
    "            time.sleep(5)\n",
    "            pass\n",
    "    else:\n",
    "        pass"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 398,
   "id": "8481f394-d554-4f41-88cb-c7a78b9f8b25",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "312"
      ]
     },
     "execution_count": 398,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "len(store_name_list)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python [conda env:base] *",
   "language": "python",
   "name": "conda-base-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
